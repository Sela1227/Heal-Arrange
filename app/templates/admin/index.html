{% extends "base.html" %}

{% block title %}ç®¡ç†å¾Œå° - é«˜æª¢ç—…äººå‹•æ…‹ç³»çµ±{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-800">ğŸ› ï¸ ç®¡ç†å¾Œå°</h1>
    <p class="text-gray-500 mt-1">ç³»çµ±è¨­å®šèˆ‡è³‡æ–™ç®¡ç†</p>
</div>

<!-- çµ±è¨ˆå¡ç‰‡ -->
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
    <div class="bg-white rounded-xl shadow p-5">
        <div class="flex items-center justify-between">
            <div>
                <div class="text-3xl font-bold text-blue-600">{{ user_count }}</div>
                <div class="text-gray-500 text-sm">ä½¿ç”¨è€…</div>
            </div>
            <div class="text-4xl">ğŸ‘¥</div>
        </div>
        {% if pending_count > 0 %}
        <div class="mt-2 text-orange-500 text-sm">â³ {{ pending_count }} äººå¾…å¯©æ ¸</div>
        {% endif %}
    </div>
    
    <div class="bg-white rounded-xl shadow p-5">
        <div class="flex items-center justify-between">
            <div>
                <div class="text-3xl font-bold text-green-600">{{ patient_count }}</div>
                <div class="text-gray-500 text-sm">ä»Šæ—¥ç—…äºº</div>
            </div>
            <div class="text-4xl">ğŸ¥</div>
        </div>
    </div>
    
    <div class="bg-white rounded-xl shadow p-5">
        <div class="flex items-center justify-between">
            <div>
                <div class="text-3xl font-bold text-purple-600">{{ exam_count }}</div>
                <div class="text-gray-500 text-sm">æª¢æŸ¥é …ç›®</div>
            </div>
            <div class="text-4xl">ğŸ”¬</div>
        </div>
    </div>
    
    <div class="bg-white rounded-xl shadow p-5">
        <div class="flex items-center justify-between">
            <div>
                <div class="text-3xl font-bold {% if broken_count > 0 %}text-red-600{% else %}text-green-600{% endif %}">
                    {{ equipment_count }}
                </div>
                <div class="text-gray-500 text-sm">è¨­å‚™æ•¸</div>
            </div>
            <div class="text-4xl">ğŸ–¥ï¸</div>
        </div>
        {% if broken_count > 0 %}
        <div class="mt-2 text-red-500 text-sm">ğŸ”´ {{ broken_count }} å°æ•…éšœ</div>
        {% endif %}
    </div>
</div>

<!-- åŠŸèƒ½å€å¡Š -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- å¸³è™Ÿç®¡ç† -->
    <a href="/admin/users" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ‘¥</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">å¸³è™Ÿç®¡ç†</h3>
                <p class="text-sm text-gray-500">ä½¿ç”¨è€…å¯©æ ¸èˆ‡æ¬Šé™è¨­å®š</p>
            </div>
        </div>
        {% if pending_count > 0 %}
        <div class="bg-orange-50 text-orange-700 px-3 py-2 rounded-lg text-sm">
            â³ {{ pending_count }} å€‹å¸³è™Ÿå¾…å¯©æ ¸
        </div>
        {% endif %}
    </a>
    
    <!-- ç—…äººç®¡ç† -->
    <a href="/admin/patients" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ“‹</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">ç—…äººç®¡ç†</h3>
                <p class="text-sm text-gray-500">ç—…äººè³‡æ–™èˆ‡ CSV åŒ¯å…¥</p>
            </div>
        </div>
    </a>
    
    <!-- æª¢æŸ¥é …ç›®ç®¡ç† -->
    <a href="/admin/exams" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ”¬</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">æª¢æŸ¥é …ç›®ç®¡ç†</h3>
                <p class="text-sm text-gray-500">æª¢æŸ¥ç«™è¨­å®š</p>
            </div>
        </div>
    </a>
    
    <!-- è¨­å‚™ç®¡ç† -->
    <a href="/admin/equipment" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ–¥ï¸</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">è¨­å‚™ç®¡ç†</h3>
                <p class="text-sm text-gray-500">è¨­å‚™ç‹€æ…‹èˆ‡æ•…éšœè™•ç†</p>
            </div>
        </div>
        {% if broken_count > 0 %}
        <div class="bg-red-50 text-red-700 px-3 py-2 rounded-lg text-sm">
            ğŸ”´ {{ broken_count }} å°è¨­å‚™æ•…éšœ
        </div>
        {% endif %}
    </a>
    
    <!-- çµ±è¨ˆå ±è¡¨ -->
    <a href="/admin/reports" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ“Š</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">çµ±è¨ˆå ±è¡¨</h3>
                <p class="text-sm text-gray-500">æ•¸æ“šåˆ†æèˆ‡åŒ¯å‡º</p>
            </div>
        </div>
    </a>
    
    <!-- è§’è‰²æ¨¡æ“¬ -->
    <a href="/admin/impersonate" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group border-2 border-purple-100">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ­</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">è§’è‰²æ¨¡æ“¬</h3>
                <p class="text-sm text-gray-500">åˆ‡æ›è¦–è§’æŸ¥çœ‹å…¶ä»–è§’è‰²ç•«é¢</p>
            </div>
        </div>
    </a>
    
    <!-- èª¿åº¦å° -->
    <a href="/dispatcher" 
       class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition group border-2 border-blue-100">
        <div class="flex items-center mb-4">
            <div class="text-4xl mr-4 group-hover:scale-110 transition">ğŸ“Š</div>
            <div>
                <h3 class="font-bold text-lg text-gray-800">å‰å¾€èª¿åº¦å°</h3>
                <p class="text-sm text-gray-500">ç—…äººæŒ‡æ´¾èˆ‡å³æ™‚ç›£æ§</p>
            </div>
        </div>
    </a>
</div>

<!-- å¿«é€Ÿåˆå§‹åŒ– -->
<div class="mt-8 bg-gray-50 rounded-xl p-6">
    <h3 class="font-bold text-gray-700 mb-4">ğŸš€ å¿«é€Ÿåˆå§‹åŒ–</h3>
    <div class="flex flex-wrap gap-4">
        <form action="/admin/exams/init" method="POST" class="inline">
            <button type="submit" 
                    class="px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-sm">
                ğŸ”¬ åˆå§‹åŒ–æª¢æŸ¥é …ç›®
            </button>
        </form>
        <form action="/admin/equipment/init" method="POST" class="inline">
            <button type="submit" 
                    class="px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-sm">
                ğŸ–¥ï¸ åˆå§‹åŒ–è¨­å‚™
            </button>
        </form>
    </div>
</div>
{% endblock %}
