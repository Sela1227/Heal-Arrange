<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªåŠ©å ±åˆ° - é«˜æª¢ç—…äººå‹•æ…‹ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
        
        {% if success %}
        <!-- æˆåŠŸ -->
        <div class="bg-gradient-to-r from-green-400 to-green-600 p-6 text-center">
            <div class="text-6xl mb-4">
                {% if already_checked_in %}
                â„¹ï¸
                {% else %}
                âœ…
                {% endif %}
            </div>
            <h1 class="text-2xl font-bold text-white">
                {% if already_checked_in %}
                å·²å®Œæˆå ±åˆ°
                {% else %}
                å ±åˆ°æˆåŠŸï¼
                {% endif %}
            </h1>
        </div>
        
        <div class="p-6">
            <!-- ç—…äººè³‡è¨Š -->
            {% if patient %}
            <div class="bg-gray-50 rounded-xl p-4 mb-4">
                <div class="text-center mb-4">
                    <div class="text-4xl mb-2">ğŸ‘¤</div>
                    <div class="text-2xl font-bold text-gray-800">{{ patient.name }}</div>
                    <div class="text-gray-500">ç—…æ­·è™Ÿï¼š{{ patient.chart_no }}</div>
                </div>
                
                {% if tracking %}
                <div class="border-t pt-4 mt-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-600">ç›®å‰ç‹€æ…‹</span>
                        <span class="px-3 py-1 rounded-full text-sm font-medium
                            {% if tracking.current_status == 'waiting' %}
                            bg-yellow-100 text-yellow-800
                            {% elif tracking.current_status == 'in_exam' %}
                            bg-blue-100 text-blue-800
                            {% elif tracking.current_status == 'completed' %}
                            bg-green-100 text-green-800
                            {% else %}
                            bg-gray-100 text-gray-800
                            {% endif %}
                        ">
                            {% if tracking.current_status == 'waiting' %}
                            â³ ç­‰å€™ä¸­
                            {% elif tracking.current_status == 'in_exam' %}
                            ğŸ”¬ æª¢æŸ¥ä¸­
                            {% elif tracking.current_status == 'moving' %}
                            ğŸš¶ ç§»å‹•ä¸­
                            {% elif tracking.current_status == 'completed' %}
                            âœ… å·²å®Œæˆ
                            {% else %}
                            {{ tracking.current_status }}
                            {% endif %}
                        </span>
                    </div>
                    {% if tracking.current_location %}
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">ç›®å‰ä½ç½®</span>
                        <span class="font-medium text-gray-800">{{ tracking.current_location }}</span>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}
            
            <div class="text-center text-gray-600 mb-4">
                {{ message }}
            </div>
            
            <!-- æç¤º -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-700">
                <div class="font-medium mb-1">ğŸ“‹ ä¸‹ä¸€æ­¥</div>
                {% if already_checked_in %}
                <p>è«‹ä¾ç…§å€‹ç®¡å¸«æŒ‡ç¤ºå‰å¾€å„æª¢æŸ¥ç«™</p>
                {% else %}
                <p>è«‹è‡³å ±åˆ°æ«ƒæª¯å®Œæˆç¢ºèªï¼Œä¸¦ç­‰å€™å€‹ç®¡å¸«æ¥å¾…</p>
                {% endif %}
            </div>
        </div>
        
        {% else %}
        <!-- å¤±æ•— -->
        <div class="bg-gradient-to-r from-red-400 to-red-600 p-6 text-center">
            <div class="text-6xl mb-4">âŒ</div>
            <h1 class="text-2xl font-bold text-white">å ±åˆ°å¤±æ•—</h1>
        </div>
        
        <div class="p-6">
            <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center mb-4">
                <div class="text-red-700">{{ message }}</div>
            </div>
            
            <div class="text-center text-gray-600 text-sm">
                <p>å¦‚æœ‰å•é¡Œï¼Œè«‹æ´½å ±åˆ°æ«ƒæª¯äººå“¡å”åŠ©</p>
            </div>
        </div>
        {% endif %}
        
        <!-- åº•éƒ¨ -->
        <div class="bg-gray-50 px-6 py-4 text-center text-xs text-gray-400">
            å½°æ¿±ç§€å‚³é†«é™¢ é«˜ç´šå¥æª¢ä¸­å¿ƒ
        </div>
    </div>
</body>
</html>
